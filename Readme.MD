# API de Filmes - Servi√ßo de Cat√°logo

Esta √© a documenta√ß√£o para a API de Filmes, um microsservi√ßo respons√°vel por gerenciar o cat√°logo de filmes, g√™neros, elenco, reviews e favoritos dos usu√°rios.

Este servi√ßo foi desenvolvido utilizando **Java** com o framework **Spring Boot** e a seguran√ßa √© gerenciada via **JWT (JSON Web Tokens)**, operando de forma totalmente *stateless*.

## üöÄ Tecnologias Utilizadas

* **Java 17+**
* **Spring Boot**
* **Spring Security** (com autentica√ß√£o baseada em JWT)
* **Maven** (para gerenciamento de depend√™ncias)
* **JPA / Hibernate** (para persist√™ncia de dados)
* **PostgreSQL** (Banco de dados)

## ‚öôÔ∏è Configura√ß√£o do Projeto

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone <URL_DO_SEU_REPOSITORIO>
    cd <NOME_DO_PROJETO>
    ```

2.  **Configure o Banco de Dados:**
    Certifique-se de ter uma inst√¢ncia do **PostgreSQL** em execu√ß√£o e crie um banco de dados para a aplica√ß√£o.

3.  **Configure as vari√°veis de ambiente:**
    Este projeto utiliza o arquivo `application.properties` para configura√ß√£o. Abra o arquivo localizado em `src/main/resources/application.properties` e configure as propriedades de conex√£o com o seu banco de dados PostgreSQL e o segredo do JWT:
    ```properties
    # Configura√ß√£o do Banco de Dados PostgreSQL
    spring.datasource.url=jdbc:postgresql://localhost:5432/nome_do_seu_banco
    spring.datasource.username=seu_usuario
    spring.datasource.password=sua_senha

    # Chave secreta para assinatura dos tokens JWT
    api.security.token.secret=seu-segredo-super-secreto
    ```

4.  **Instale as depend√™ncias e compile o projeto:**
    O projeto utiliza Maven. Execute o seguinte comando na raiz do projeto para baixar as depend√™ncias e compilar:
    ```bash
    mvn clean install
    ```

5.  **Execute a aplica√ß√£o:**
    ```bash
    java -jar target/seu-projeto-0.0.1-SNAPSHOT.jar
    ```
    A API estar√° dispon√≠vel em `http://localhost:8080` (ou na porta que voc√™ configurar).

## üîê Seguran√ßa e Autentica√ß√£o

A seguran√ßa da API √© baseada em JWT e controle de acesso por pap√©is (Role-Based Access Control).

* **Stateless:** A API n√£o mant√©m sess√µes de usu√°rio. Cada requisi√ß√£o para um endpoint protegido deve conter um token JWT v√°lido no cabe√ßalho `Authorization`.
    ```
    Authorization: Bearer <seu-token-jwt>
    ```
* **N√≠veis de Acesso:**
    * **`ADMIN`**: Usu√°rios com este papel t√™m permiss√£o para gerenciar o cat√°logo (adicionar filmes, g√™neros, elenco, etc.).
    * **`USER` (Autenticado)**: Qualquer usu√°rio autenticado (com um token v√°lido) pode acessar as funcionalidades p√∫blicas, como listar g√™neros, gerenciar seus pr√≥prios favoritos e reviews.

## üìñ Endpoints da API

Aqui est√° a lista de todos os endpoints dispon√≠veis, com seus respectivos m√©todos HTTP, descri√ß√£o e permiss√µes necess√°rias.

### Gerenciamento de Filmes
*Acesso restrito a administradores.*

| M√©todo | Endpoint      | Descri√ß√£o                           | Permiss√£o |
| :----- | :------------ | :---------------------------------- | :-------- |
| `POST` | `/filmes/add` | Adiciona um novo filme ao cat√°logo. | `ADMIN`   |

---

### Gerenciamento de G√™neros
*Adicionar g√™neros √© restrito a administradores. Listar √© p√∫blico para usu√°rios autenticados.*

| M√©todo | Endpoint         | Descri√ß√£o                           | Permiss√£o   |
| :----- | :--------------- | :---------------------------------- | :---------- |
| `POST` | `/generos/add`   | Adiciona um novo g√™nero.            | `ADMIN`     |
| `GET`  | `/generos/list`  | Lista todos os g√™neros dispon√≠veis. | `Autenticado` |

---

### Gerenciamento de Elenco, Pessoas e Imagens
*Acesso restrito a administradores.*

| M√©todo | Endpoint        | Descri√ß√£o                                 | Permiss√£o |
| :----- | :-------------- | :---------------------------------------- | :-------- |
| `POST` | `/elencos/add`  | Adiciona uma pessoa a um elenco de filme. | `ADMIN`   |
| `POST` | `/pessoas/add`  | Adiciona uma nova pessoa (ator, diretor). | `ADMIN`   |
| `POST` | `/imagens/add`  | Adiciona uma nova imagem (p√¥ster, etc).   | `ADMIN`   |

---

### Gerenciamento de Favoritos
*Acesso dispon√≠vel para qualquer usu√°rio autenticado gerenciar sua pr√≥pria lista.*

| M√©todo   | Endpoint                              | Descri√ß√£o                                           | Permiss√£o   |
| :------- | :------------------------------------ | :-------------------------------------------------- | :---------- |
| `POST`   | `/favorites/add`                      | Adiciona um filme √† lista de favoritos de um usu√°rio.   | `Autenticado` |
| `GET`    | `/favorites/{userId}`                 | Lista todos os filmes favoritos de um usu√°rio espec√≠fico. | `Autenticado` |
| `DELETE` | `/favorites/remove/{userId}/{movieId}` | Remove um filme da lista de favoritos.               | `Autenticado` |

---

### Gerenciamento de Reviews
*Acesso dispon√≠vel para qualquer usu√°rio autenticado.*

| M√©todo   | Endpoint             | Descri√ß√£o                                     | Permiss√£o   |
| :------- | :------------------- | :-------------------------------------------- | :---------- |
| `POST`   | `/reviews/add`       | Adiciona uma nova review para um filme.       | `Autenticado` |
| `GET`    | `/reviews/{idFilme}` | Lista todas as reviews de um filme espec√≠fico. | `Autenticado` |
| `DELETE` | `/reviews/{id}`      | Deleta uma review espec√≠fica pelo seu ID.     | `Autenticado` |

---

### üí° Observa√ß√£o sobre a Arquitetura

Este servi√ßo √© um **microsservi√ßo**. A valida√ß√£o do token JWT e a obten√ß√£o de dados do usu√°rio (como o `userId` e seus pap√©is) s√£o responsabilidades de um outro microsservi√ßo de **Autentica√ß√£o/Usu√°rios**. Esta API confia no token recebido para autorizar as opera√ß√µes.